{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport * as d3 from 'd3';\nimport axios from 'axios';\nimport config from './config';\nexport default {\n  name: 'PriceChart',\n  props: {\n    selectedTimeRange: String,\n    selectedCoins: {\n      type: Array,\n      default: () => [] // Default to an empty array if not provided\n    }\n  },\n\n  data() {\n    return {\n      pricesData: {}\n    };\n  },\n  watch: {\n    selectedTimeRange: {\n      immediate: true,\n      handler(newValue) {\n        this.fetchAllCoinData(newValue);\n      }\n    }\n  },\n  methods: {\n    async fetchAllCoinData(timeRange) {\n      try {\n        const coinQueryParam = Array.isArray(this.selectedCoins) ? this.selectedCoins.join(',') : '';\n        const response = await axios.get(`${config.backendApiUrl}/getAllCoinData`, {\n          params: {\n            timeRange,\n            coins: coinQueryParam\n          } // Using coinQueryParam here\n        });\n\n        this.pricesData = this.processData(response.data.data);\n        this.drawPriceChart();\n      } catch (error) {\n        console.error('Error fetching all coin data:', error);\n      }\n    },\n    processData(data) {\n      const processedData = {};\n      data.forEach(d => {\n        const coin = d.Coin;\n        const date = new Date(d.Date);\n        const price = +d.Close;\n        if (!processedData[coin]) {\n          processedData[coin] = [];\n        }\n        processedData[coin].push({\n          date,\n          price\n        });\n      });\n      return processedData;\n    },\n    drawPriceChart() {\n      const margin = {\n        top: 5,\n        right: 30,\n        bottom: 30,\n        left: 60\n      };\n      const width = 700 - margin.left - margin.right;\n      const height = 460 - margin.top - margin.bottom;\n      d3.select('#price-chart').select('svg').remove();\n      const svg = d3.select('#price-chart').append('svg').attr('width', width + margin.left + margin.right).attr('height', height + margin.top + margin.bottom).append('g').attr('transform', `translate(${margin.left},${margin.top})`);\n      const x = d3.scaleTime().domain(d3.extent(Object.values(this.pricesData).flat(), d => d.date)).range([0, width]);\n      svg.append('g').attr('transform', `translate(0,${height})`).call(d3.axisBottom(x));\n      const y = d3.scaleLinear().domain([0, d3.max(Object.values(this.pricesData).flat(), d => d.price)]).range([height, 0]);\n      svg.append('g').call(d3.axisLeft(y));\n      const color = d3.scaleOrdinal().domain(Object.keys(this.pricesData)).range(d3.schemeSet2);\n      Object.keys(this.pricesData).forEach(coin => {\n        svg.append('path').datum(this.pricesData[coin]).attr('fill', 'none').attr('stroke', color(coin)).attr('stroke-width', 1.5).attr('d', d3.line().x(d => x(d.date)).y(d => y(d.price)));\n      });\n      const legendYPosition = height + margin.bottom + margin.top - 10;\n      const legendSpace = width / Object.keys(this.pricesData).length; // Spacing for legend items\n      Object.keys(this.pricesData).forEach((coin, index) => {\n        svg.append('text').attr('x', legendSpace / 2 + index * legendSpace) // Spacing of legend items\n        .attr('y', legendYPosition + 5).attr('class', 'legend') // Style the legend\n        .style('fill', color(coin)) // Add the color\n        .text(coin);\n\n        // Optional: Add colored rectangles next to text if needed\n        svg.append('rect').attr('x', legendSpace / 2 - 10 + index * legendSpace).attr('y', legendYPosition - 5).attr('width', 10).attr('height', 10).style('fill', color(coin));\n      });\n\n      // Tooltip for line hover\n      const tooltip = d3.select('#price-chart').append('div').attr('class', 'tooltip').style('opacity', 0);\n      Object.keys(this.pricesData).forEach(coin => {\n        const line = svg.append('path').datum(this.pricesData[coin]).attr('fill', 'none').attr('stroke', color(coin)).attr('stroke-width', 1.5).attr('d', d3.line().x(d => x(d.date)).y(d => y(d.price)));\n\n        // Event listeners for tooltip\n        line.on('mouseover', () => tooltip.style('opacity', 1)).on('mousemove', function (event, d) {\n          const [xPosition, yPosition] = d3.pointer(event, this);\n          tooltip.html(`Price: ${y.invert(yPosition).toFixed(2)}`).style('left', xPosition + 190 + 'px').style('top', yPosition + 50 + 'px');\n        }).on('mouseleave', () => tooltip.style('opacity', 0));\n      });\n    }\n  }\n};","map":{"version":3,"names":["d3","axios","config","name","props","selectedTimeRange","String","selectedCoins","type","Array","default","data","pricesData","watch","immediate","handler","newValue","fetchAllCoinData","methods","timeRange","coinQueryParam","isArray","join","response","get","backendApiUrl","params","coins","processData","drawPriceChart","error","console","processedData","forEach","d","coin","Coin","date","Date","price","Close","push","margin","top","right","bottom","left","width","height","select","remove","svg","append","attr","x","scaleTime","domain","extent","Object","values","flat","range","call","axisBottom","y","scaleLinear","max","axisLeft","color","scaleOrdinal","keys","schemeSet2","datum","line","legendYPosition","legendSpace","length","index","style","text","tooltip","on","event","xPosition","yPosition","pointer","html","invert","toFixed"],"sources":["/Users/stefanstapelberg/Desktop/FSD_PROJECT/CryptoCanvas/crypto-canvas/src/components/PriceOverTime.vue"],"sourcesContent":["<template>\n    <div>\n        <h2>Cryptocurrency Price Chart</h2>\n        <div id=\"price-chart\"></div> <!-- Container for the D3.js chart -->\n    </div>\n</template>\n\n<script>\nimport * as d3 from 'd3'\nimport axios from 'axios'\nimport config from './config'\n\nexport default {\n  name: 'PriceChart',\n  props: {\n    selectedTimeRange: String,\n    selectedCoins: {\n      type: Array,\n      default: () => []// Default to an empty array if not provided\n    }\n  },\n  data () {\n    return {\n      pricesData: {}\n    }\n  },\n  watch: {\n    selectedTimeRange: {\n      immediate: true,\n      handler (newValue) {\n        this.fetchAllCoinData(newValue)\n      }\n    }\n  },\n  methods: {\n    async fetchAllCoinData (timeRange) {\n      try {\n        const coinQueryParam = Array.isArray(this.selectedCoins) ? this.selectedCoins.join(',') : ''\n        const response = await axios.get(`${config.backendApiUrl}/getAllCoinData`, {\n          params: { timeRange, coins: coinQueryParam }// Using coinQueryParam here\n        })\n        this.pricesData = this.processData(response.data.data)\n        this.drawPriceChart()\n      } catch (error) {\n        console.error('Error fetching all coin data:', error)\n      }\n    },\n    processData (data) {\n      const processedData = {}\n      data.forEach(d => {\n        const coin = d.Coin\n        const date = new Date(d.Date)\n        const price = +d.Close\n\n        if (!processedData[coin]) {\n          processedData[coin] = []\n        }\n        processedData[coin].push({ date, price })\n      })\n      return processedData\n    },\n    drawPriceChart () {\n      const margin = { top: 5, right: 30, bottom: 30, left: 60 }\n      const width = 700 - margin.left - margin.right\n      const height = 460 - margin.top - margin.bottom\n      d3.select('#price-chart').select('svg').remove()\n\n      const svg = d3.select('#price-chart')\n        .append('svg')\n        .attr('width', width + margin.left + margin.right)\n        .attr('height', height + margin.top + margin.bottom)\n        .append('g')\n        .attr('transform', `translate(${margin.left},${margin.top})`)\n\n      const x = d3.scaleTime()\n        .domain(d3.extent(Object.values(this.pricesData).flat(), d => d.date))\n        .range([0, width])\n      svg.append('g')\n        .attr('transform', `translate(0,${height})`)\n        .call(d3.axisBottom(x))\n\n      const y = d3.scaleLinear()\n        .domain([0, d3.max(Object.values(this.pricesData).flat(), d => d.price)])\n        .range([height, 0])\n      svg.append('g')\n        .call(d3.axisLeft(y))\n\n      const color = d3.scaleOrdinal()\n        .domain(Object.keys(this.pricesData))\n        .range(d3.schemeSet2)\n\n      Object.keys(this.pricesData).forEach(coin => {\n        svg.append('path')\n          .datum(this.pricesData[coin])\n          .attr('fill', 'none')\n          .attr('stroke', color(coin))\n          .attr('stroke-width', 1.5)\n          .attr('d', d3.line()\n            .x(d => x(d.date))\n            .y(d => y(d.price))\n\n          )\n      })\n      const legendYPosition = height + margin.bottom + margin.top - 10\n\n      const legendSpace = width / Object.keys(this.pricesData).length // Spacing for legend items\n      Object.keys(this.pricesData).forEach((coin, index) => {\n        svg.append('text')\n          .attr('x', (legendSpace / 2) + index * legendSpace) // Spacing of legend items\n          .attr('y', legendYPosition + 5)\n          .attr('class', 'legend') // Style the legend\n          .style('fill', color(coin)) // Add the color\n          .text(coin)\n\n        // Optional: Add colored rectangles next to text if needed\n        svg.append('rect')\n          .attr('x', (legendSpace / 2) - 10 + index * legendSpace)\n          .attr('y', legendYPosition - 5)\n          .attr('width', 10)\n          .attr('height', 10)\n          .style('fill', color(coin))\n      })\n\n      // Tooltip for line hover\n      const tooltip = d3.select('#price-chart').append('div')\n        .attr('class', 'tooltip')\n        .style('opacity', 0)\n\n      Object.keys(this.pricesData).forEach(coin => {\n        const line = svg.append('path')\n          .datum(this.pricesData[coin])\n          .attr('fill', 'none')\n          .attr('stroke', color(coin))\n          .attr('stroke-width', 1.5)\n          .attr('d', d3.line()\n            .x(d => x(d.date))\n            .y(d => y(d.price))\n          )\n\n        // Event listeners for tooltip\n        line.on('mouseover', () => tooltip.style('opacity', 1))\n          .on('mousemove', function (event, d) {\n            const [xPosition, yPosition] = d3.pointer(event, this)\n            tooltip.html(`Price: ${y.invert(yPosition).toFixed(2)}`)\n              .style('left', (xPosition + 190) + 'px')\n              .style('top', (yPosition + 50) + 'px')\n          })\n          .on('mouseleave', () => tooltip.style('opacity', 0))\n      })\n    }\n  }\n}\n</script>\n\n<style>\nh2 {\n  text-align: left;\n  margin-bottom: 10px; /* Reduced bottom margin */\n  margin-top: 20px; /* Add top margin if needed */\n  margin-left: 60px;\n}\n\n#price-chart {\n  padding-top: 20px; /* Add padding to the top of the chart container */\n}\n\n.tooltip {\n  position: absolute;\n  text-align: center;\n  transition: opacity 0.3s;\n}\n\n.legend {\n  font-size: 12px;\n}\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}