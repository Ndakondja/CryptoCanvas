{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport * as d3 from 'd3';\nimport axios from 'axios';\nimport config from './config';\nexport default {\n  name: 'PriceChart',\n  data() {\n    return {\n      pricesData: {}\n    };\n  },\n  mounted() {\n    this.fetchAllCoinData();\n  },\n  methods: {\n    async fetchAllCoinData() {\n      try {\n        const response = await axios.get(`${config.backendApiUrl}/getAllCoinData`);\n        this.pricesData = this.processData(response.data.data);\n        this.drawPriceChart();\n      } catch (error) {\n        console.error('Error fetching all coin data:', error);\n      }\n    },\n    processData(data) {\n      const processedData = {};\n      data.forEach(d => {\n        const coin = d.Coin;\n        const date = new Date(d.Date);\n        const price = +d.Close;\n        if (!processedData[coin]) {\n          processedData[coin] = [];\n        }\n        processedData[coin].push({\n          date,\n          price\n        });\n      });\n      return processedData;\n    },\n    drawPriceChart() {\n      const margin = {\n        top: 10,\n        right: 30,\n        bottom: 30,\n        left: 60\n      };\n      const width = 460 - margin.left - margin.right;\n      const height = 400 - margin.top - margin.bottom;\n      d3.select('#price-chart').select('svg').remove();\n      const svg = d3.select('#price-chart').append('svg').attr('width', width + margin.left + margin.right).attr('height', height + margin.top + margin.bottom).append('g').attr('transform', `translate(${margin.left},${margin.top})`);\n      const x = d3.scaleTime().domain(d3.extent(Object.values(this.pricesData).flat(), d => d.date)).range([0, width]);\n      svg.append('g').attr('transform', `translate(0,${height})`).call(d3.axisBottom(x));\n      const y = d3.scaleLinear().domain([0, d3.max(Object.values(this.pricesData).flat(), d => d.price)]).range([height, 0]);\n      svg.append('g').call(d3.axisLeft(y));\n      const color = d3.scaleOrdinal().domain(Object.keys(this.pricesData)).range(d3.schemeSet2);\n      Object.keys(this.pricesData).forEach(coin => {\n        svg.append('path').datum(this.pricesData[coin]).attr('fill', 'none').attr('stroke', color(coin)).attr('stroke-width', 1.5).attr('d', d3.line().x(d => x(d.date)).y(d => y(d.price)));\n      });\n      const legendYPosition = height + margin.bottom + margin.top - 10;\n      const legendSpace = width / Object.keys(this.pricesData).length; // Spacing for legend items\n      Object.keys(this.pricesData).forEach((coin, index) => {\n        svg.append(\"text\").attr(\"x\", legendSpace / 2 + index * legendSpace) // Spacing of legend items\n        .attr(\"y\", legendYPosition).attr(\"class\", \"legend\") // Style the legend\n        .style(\"fill\", color(coin)) // Add the color\n        .text(coin);\n\n        // Optional: Add colored rectangles next to text if needed\n        svg.append(\"rect\").attr(\"x\", legendSpace / 2 - 10 + index * legendSpace).attr(\"y\", legendYPosition - 10).attr(\"width\", 10).attr(\"height\", 10).style(\"fill\", color(coin));\n      });\n\n      // Tooltip for line hover\n      const tooltip = d3.select('#price-chart').append('div').attr('class', 'tooltip').style('opacity', 0);\n      Object.keys(this.pricesData).forEach(coin => {\n        const line = svg.append('path').datum(this.pricesData[coin]).attr('fill', 'none').attr('stroke', color(coin)).attr('stroke-width', 1.5).attr('d', d3.line().x(d => x(d.date)).y(d => y(d.price)));\n\n        // Event listeners for tooltip\n        line.on('mouseover', () => tooltip.style('opacity', 1)).on('mousemove', function (event, d) {\n          const [xPosition, yPosition] = d3.pointer(event, this);\n          tooltip.html(`Price: ${y.invert(yPosition).toFixed(2)}`).style('left', xPosition + 100 + 'px').style('top', yPosition + 10 + 'px');\n        }).on('mouseleave', () => tooltip.style('opacity', 0));\n      });\n    }\n  }\n};","map":{"version":3,"names":["d3","axios","config","name","data","pricesData","mounted","fetchAllCoinData","methods","response","get","backendApiUrl","processData","drawPriceChart","error","console","processedData","forEach","d","coin","Coin","date","Date","price","Close","push","margin","top","right","bottom","left","width","height","select","remove","svg","append","attr","x","scaleTime","domain","extent","Object","values","flat","range","call","axisBottom","y","scaleLinear","max","axisLeft","color","scaleOrdinal","keys","schemeSet2","datum","line","legendYPosition","legendSpace","length","index","style","text","tooltip","on","event","xPosition","yPosition","pointer","html","invert","toFixed"],"sources":["/Users/stefanstapelberg/Desktop/FSD_PROJECT/CryptoCanvas/crypto-canvas/src/components/PriceOverTime.vue"],"sourcesContent":["<template>\n    <div>\n      <div id=\"price-chart\"></div> <!-- Container for the D3.js chart -->\n    </div>\n</template>\n\n<script>\nimport * as d3 from 'd3';\nimport axios from 'axios';\nimport config from './config';\n\nexport default {\n  name: 'PriceChart',\n  data() {\n    return {\n      pricesData: {}\n    };\n  },\n  mounted() {\n    this.fetchAllCoinData();\n  },\n  methods: {\n    async fetchAllCoinData() {\n      try {\n        const response = await axios.get(`${config.backendApiUrl}/getAllCoinData`);\n        this.pricesData = this.processData(response.data.data);\n        this.drawPriceChart();\n      } catch (error) {\n        console.error('Error fetching all coin data:', error);\n      }\n    },\n    processData(data) {\n      const processedData = {};\n      data.forEach(d => {\n        const coin = d.Coin;\n        const date = new Date(d.Date);\n        const price = +d.Close;\n        \n        if (!processedData[coin]) {\n          processedData[coin] = [];\n        }\n        processedData[coin].push({ date, price });\n      });\n      return processedData;\n    },\n    drawPriceChart() {\n      const margin = { top: 10, right: 30, bottom: 30, left: 60 };\n      const width = 460 - margin.left - margin.right;\n      const height = 400 - margin.top - margin.bottom;\n      d3.select('#price-chart').select('svg').remove();\n\n      const svg = d3.select('#price-chart')\n        .append('svg')\n        .attr('width', width + margin.left + margin.right)\n        .attr('height', height + margin.top + margin.bottom)\n        .append('g')\n        .attr('transform', `translate(${margin.left},${margin.top})`);\n\n      const x = d3.scaleTime()\n        .domain(d3.extent(Object.values(this.pricesData).flat(), d => d.date))\n        .range([0, width]);\n      svg.append('g')\n        .attr('transform', `translate(0,${height})`)\n        .call(d3.axisBottom(x));\n\n      const y = d3.scaleLinear()\n        .domain([0, d3.max(Object.values(this.pricesData).flat(), d => d.price)])\n        .range([height, 0]);\n      svg.append('g')\n        .call(d3.axisLeft(y));\n\n      const color = d3.scaleOrdinal()\n        .domain(Object.keys(this.pricesData))\n        .range(d3.schemeSet2);\n\n      Object.keys(this.pricesData).forEach(coin => {\n        svg.append('path')\n          .datum(this.pricesData[coin])\n          .attr('fill', 'none')\n          .attr('stroke', color(coin))\n          .attr('stroke-width', 1.5)\n          .attr('d', d3.line()\n            .x(d => x(d.date))\n            .y(d => y(d.price))\n            \n          );\n      });\n      const legendYPosition = height + margin.bottom + margin.top -10;\n\n\n      const legendSpace = width / Object.keys(this.pricesData).length; // Spacing for legend items\n      Object.keys(this.pricesData).forEach((coin, index) => {\n        svg.append(\"text\")\n            .attr(\"x\", (legendSpace / 2) + index * legendSpace) // Spacing of legend items\n            .attr(\"y\", legendYPosition)\n            .attr(\"class\", \"legend\")    // Style the legend\n            .style(\"fill\", color(coin)) // Add the color\n            .text(coin);\n\n        // Optional: Add colored rectangles next to text if needed\n        svg.append(\"rect\")\n            .attr(\"x\", (legendSpace / 2) - 10 + index * legendSpace)\n            .attr(\"y\", legendYPosition - 10)\n            .attr(\"width\", 10)\n            .attr(\"height\", 10)\n            .style(\"fill\", color(coin));\n        });\n          \n        // Tooltip for line hover\n        const tooltip = d3.select('#price-chart').append('div')\n        .attr('class', 'tooltip')\n        .style('opacity', 0);\n\n        Object.keys(this.pricesData).forEach(coin => {\n            const line = svg.append('path')\n            .datum(this.pricesData[coin])\n            .attr('fill', 'none')\n            .attr('stroke', color(coin))\n            .attr('stroke-width', 1.5)\n            .attr('d', d3.line()\n            .x(d => x(d.date))\n            .y(d => y(d.price))\n            );\n\n     // Event listeners for tooltip\n            line.on('mouseover', () => tooltip.style('opacity', 1))\n            .on('mousemove', function(event, d) {\n            const [xPosition, yPosition] = d3.pointer(event, this);\n            tooltip.html(`Price: ${y.invert(yPosition).toFixed(2)}`)\n            .style('left', (xPosition + 100) + 'px')\n            .style('top', (yPosition + 10) + 'px');\n            })\n            .on('mouseleave', () => tooltip.style('opacity', 0));\n        });\n\n    }\n  }\n}\n</script>\n\n<style>\n.tooltip {\n    position: absolute;\n    text-align: center;\n    transition: opacity 0.3s;\n}\n\n.legend {\n  font-size: 12px;\n}\n</style>\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}